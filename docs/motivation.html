<!DOCTYPE html>
<html lang="en-US" xml:lang="en-US">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 Motivation | Data Analysis Using Regression and Multilevel/Hierarchical Models</title>
  <meta name="description" content="Using the bookdown package to write a book for Data Analysis Using Regression and Multilevel/Hierarchical Models. The output format for this example is bookdown::gitbook." />
  <meta name="generator" content="bookdown 0.25 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 Motivation | Data Analysis Using Regression and Multilevel/Hierarchical Models" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Using the bookdown package to write a book for Data Analysis Using Regression and Multilevel/Hierarchical Models. The output format for this example is bookdown::gitbook." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 Motivation | Data Analysis Using Regression and Multilevel/Hierarchical Models" />
  
  <meta name="twitter:description" content="Using the bookdown package to write a book for Data Analysis Using Regression and Multilevel/Hierarchical Models. The output format for this example is bookdown::gitbook." />
  

<meta name="author" content="Gelman and Hill, 2007" />


<meta name="date" content="2022-12-15" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="the-data.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script type="text/javascript">

// toggle visibility of R source blocks in R Markdown output
function toggle_R() {
  var x = document.getElementsByClassName('r');
  if (x.length == 0) return;
  function toggle_vis(o) {
    var d = o.style.display;
    o.style.display = (d == 'block' || d == '') ? 'none':'block';
  }

  for (i = 0; i < x.length; i++) {
    var y = x[i];
    if (y.tagName.toLowerCase() === 'pre') toggle_vis(y);
  }

    var elem = document.getElementById("myButton1");
    if (elem.value === "Hide Code") elem.value = "Show Code";
    else elem.value = "Hide Code";
}

document.write('<input onclick="toggle_R();" type="button" value="Hide Code" id="myButton1" style="position: absolute; top: 10%; right: 2%; z-index: 200"></input>')

</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="index.html#source" id="toc-source"><span class="toc-section-number">1</span> Source<span></span></a></li>
<li><a href="motivation.html#motivation" id="toc-motivation"><span class="toc-section-number">2</span> Motivation<span></span></a>
<ul>
<li><a href="motivation.html#some-definitions-and-details" id="toc-some-definitions-and-details"><span class="toc-section-number">2.1</span> Some definitions and details<span></span></a></li>
</ul></li>
<li><a href="the-data.html#the-data" id="toc-the-data"><span class="toc-section-number">3</span> The data<span></span></a></li>
<li><a href="multilevel-linear-models-the-basics-ch-12.html#multilevel-linear-models-the-basics-ch-12" id="toc-multilevel-linear-models-the-basics-ch-12"><span class="toc-section-number">4</span> Multilevel linear models: the basics (Ch 12)<span></span></a>
<ul>
<li><a href="multilevel-linear-models-the-basics-ch-12.html#setup" id="toc-setup"><span class="toc-section-number">4.1</span> Setup<span></span></a></li>
<li><a href="multilevel-linear-models-the-basics-ch-12.html#load-data" id="toc-load-data"><span class="toc-section-number">4.2</span> Load data<span></span></a></li>
<li><a href="multilevel-linear-models-the-basics-ch-12.html#varying-intercept-multilevel-model-no-predictors-p.-253" id="toc-varying-intercept-multilevel-model-no-predictors-p.-253"><span class="toc-section-number">4.3</span> Varying-intercept multilevel model, no predictors (p.Â 253)<span></span></a>
<ul>
<li><a href="multilevel-linear-models-the-basics-ch-12.html#data-and-initial-conditions" id="toc-data-and-initial-conditions"><span class="toc-section-number">4.3.1</span> Data and Initial conditions<span></span></a></li>
<li><a href="multilevel-linear-models-the-basics-ch-12.html#jags-model" id="toc-jags-model"><span class="toc-section-number">4.3.2</span> JAGS Model<span></span></a></li>
<li><a href="multilevel-linear-models-the-basics-ch-12.html#implement-jags-model" id="toc-implement-jags-model"><span class="toc-section-number">4.3.3</span> Implement JAGS Model<span></span></a></li>
<li><a href="multilevel-linear-models-the-basics-ch-12.html#summary-of-the-marginal-posterior-distributions-of-the-parameters" id="toc-summary-of-the-marginal-posterior-distributions-of-the-parameters"><span class="toc-section-number">4.3.4</span> Summary of the marginal posterior distributions of the parameters<span></span></a></li>
<li><a href="multilevel-linear-models-the-basics-ch-12.html#make-a-horizontal-caterpillar-plot-for-the-alpha_j" id="toc-make-a-horizontal-caterpillar-plot-for-the-alpha_j"><span class="toc-section-number">4.3.5</span> Make a horizontal caterpillar plot for the <span class="math inline">\(\alpha_{j}\)</span><span></span></a></li>
<li><a href="multilevel-linear-models-the-basics-ch-12.html#sort-the-alpha_j-by-number-of-obs." id="toc-sort-the-alpha_j-by-number-of-obs."><span class="toc-section-number">4.3.6</span> Sort the <span class="math inline">\(\alpha_{j}\)</span> by number of obs.<span></span></a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Analysis Using Regression and Multilevel/Hierarchical Models</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="motivation" class="section level1 hasAnchor" number="2">
<h1><span class="header-section-number">Chapter 2</span> Motivation<a href="motivation.html#motivation" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>The following multilevel modelling exercises are from <a href="http://www.stat.columbia.edu/~gelman/arm/">Gelman &amp; Hill (2007)</a>. The objective is to learn how to fit models with different group- and treatment-level hierarchies allowing for many varying intercepts and slopes.</p>
<p><em>We consider a multilevel model to be a regression (a linear or generalized linear model) in which the parameters (i.e., the regression coefficients) are given a probability model. This second-level model has parameters of its own (i.e., hyperparameters of the model) which are also estimated from data.</em> (p.Â 1)</p>
<p>The two key parts of a multilevel model are:</p>
<ol style="list-style-type: decimal">
<li>varying coefficients, and</li>
<li>a model for those varying coefficients (which can itself include group-level predictors).</li>
</ol>
<p>Classical regression can sometimes accommodate varying coefficients by using indicator variables. The feature that distinguishes multilevel models from classical regression is in the modeling of the variation between groups.</p>
<p>Another, succinct definition:</p>
<p><em>We view multilevel models either as regressions with potentially large numbers of coefficients that are themselves modeled, or as regressions with coefficients that can vary by group.</em> (p.Â 235)</p>
<p><img src="../data/slopes_intercepts.jpg" title="slopes_intercepts" alt="Varying slopes and intercepts" />
(p.Â 238)</p>
<p>Multilevel regression can be thought of as a method for compromising between the two extremes of excluding a categorical predictor from a model (complete pooling), or estimating separate models within each level of the categorical predictor (no pooling). (p.Â 252)</p>
<div id="some-definitions-and-details" class="section level2 hasAnchor" number="2.1">
<h2><span class="header-section-number">2.1</span> Some definitions and details<a href="motivation.html#some-definitions-and-details" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><em>Non-nested models</em> included cases in which a given dataset can be structured into groups in more than one way. For example, persons in a national survey can be divided by demographics or by states. Responses in a psychological experiment might be classified by person (experimental subject), experimental condition, and time (p.Â 279)</p>
<p><em>Why we avoid the term ârandom effects.â</em> (p.Â 2-3)
Multilevel models are often known as random-effects or mixed-effects models. The regression coefficients that are being modeled are called <em>random effects</em>, in the sense that they are considered random outcomes of a process identified with the model that is predicting them. In contrast, <em>fixed effects</em> correspond either to parameters that do not vary (for example, fitting the same regresslon line for each of the schools) or to parameters that vary but are not modeled themselves (for example, fitting a least squares regression model with various predictors, including indicators for the schools). A <em>mixed-effects</em> model includes both fixed and random effects; for example, in the varying-intercept model below, the varying intercepts <span class="math inline">\(\alpha_j\)</span> have a group-level model, but <span class="math inline">\(\beta\)</span> is fixed and does not vary by group.</p>
<p><span class="math display">\[\begin{align*}
y_i &amp;= \alpha_{j[i]} + \beta\cdot x_i + \epsilon_i \\
\alpha_{j} &amp;= a + b\cdot u_j + \eta_j
\end{align*}\]</span></p>
<p>for students <span class="math inline">\(i = 1, \cdots,n\)</span> and schools <span class="math inline">\(j = 1, \cdots,J\)</span></p>
<p>Fixed effects can be viewed as special cases of random effects, in which the higher-level variance (in model above, this would be <span class="math inline">\(\sigma^{2}_{\alpha}\)</span>) is set to 0 or <span class="math inline">\(\infty\)</span>. Hence, in our framework, all regression parameters are ârandomââ and the term âmultilevelâ is all-encompassing. As we discuss on page 245, we find the terms âfixed,â ârandom,â and âmixedâ effects to be confusing and often misleading, and so we avoid their use.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="the-data.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
